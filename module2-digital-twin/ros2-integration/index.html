<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module2-digital-twin/ros2-integration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">ROS 2 Integration with Simulators | Physical AI &amp; Humanoid Robotics Textbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://physical-ai-robotics.vercel.app/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://physical-ai-robotics.vercel.app/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://physical-ai-robotics.vercel.app/module2-digital-twin/ros2-integration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ROS 2 Integration with Simulators | Physical AI &amp; Humanoid Robotics Textbook"><meta data-rh="true" name="description" content="Connecting Your Robotic Brain to the Virtual Body"><meta data-rh="true" property="og:description" content="Connecting Your Robotic Brain to the Virtual Body"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://physical-ai-robotics.vercel.app/module2-digital-twin/ros2-integration"><link data-rh="true" rel="alternate" href="https://physical-ai-robotics.vercel.app/module2-digital-twin/ros2-integration" hreflang="en"><link data-rh="true" rel="alternate" href="https://physical-ai-robotics.vercel.app/module2-digital-twin/ros2-integration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chapter 13: ROS 2 Integration with Simulators","item":"https://physical-ai-robotics.vercel.app/module2-digital-twin/ros2-integration"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Physical AI &amp; Humanoid Robotics Textbook RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Physical AI &amp; Humanoid Robotics Textbook Atom Feed"><link rel="stylesheet" href="/assets/css/styles.6ac29a49.css">
<script src="/assets/js/runtime~main.ded28cfb.js" defer="defer"></script>
<script src="/assets/js/main.520e11a5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Humanoids &amp; Physical AI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="60px" width="50px"><img src="/img/logo.png" alt="Humanoids &amp; Physical AI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="60px" width="50px"></div><b class="navbar__title text--truncate">Humanoids &amp; Physical AI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/introduction/what-is-physical-ai">Book</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ShumailaWaheed/Physical-AI-Humanoid-Robotics-A-Comprehensive-Textbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/introduction/what-is-physical-ai"><span title="Introduction" class="categoryLinkLabel_W154">Introduction</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/module1-ros2/ros2-fundamentals"><span title="Module 1: The Robotic Nervous System (ROS 2)" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System (ROS 2)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/module2-digital-twin/digital-twins-in-robotics"><span title="Module 2: The Digital Twin (Gazebo &amp; Unity)" class="categoryLinkLabel_W154">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/module2-digital-twin/digital-twins-in-robotics"><span title="Chapter 9: Digital Twins in Robotics" class="linkLabel_WmDU">Chapter 9: Digital Twins in Robotics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/module2-digital-twin/gazebo-simulation-setup"><span title="Chapter 10: Gazebo Simulation Setup" class="linkLabel_WmDU">Chapter 10: Gazebo Simulation Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/module2-digital-twin/sensors-and-physics"><span title="Chapter 11: Sensors and Physics Simulation" class="linkLabel_WmDU">Chapter 11: Sensors and Physics Simulation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/module2-digital-twin/unity-for-robotics"><span title="Chapter 12: Unity for Robotics Visualization" class="linkLabel_WmDU">Chapter 12: Unity for Robotics Visualization</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/module2-digital-twin/ros2-integration"><span title="Chapter 13: ROS 2 Integration with Simulators" class="linkLabel_WmDU">Chapter 13: ROS 2 Integration with Simulators</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/module3-ai-robot-brain/isaac-sim-overview"><span title="Module 3: The AI-Robot Brain (NVIDIA Isaac)" class="categoryLinkLabel_W154">Module 3: The AI-Robot Brain (NVIDIA Isaac)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/module4-vla-capstone/vla-fundamentals"><span title="Module 4: Vision-Language-Action (VLA) + Capstone" class="categoryLinkLabel_W154">Module 4: Vision-Language-Action (VLA) + Capstone</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chapter 13: ROS 2 Integration with Simulators</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ROS 2 Integration with Simulators</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="connecting-your-robotic-brain-to-the-virtual-body">Connecting Your Robotic Brain to the Virtual Body<a href="#connecting-your-robotic-brain-to-the-virtual-body" class="hash-link" aria-label="Direct link to Connecting Your Robotic Brain to the Virtual Body" title="Direct link to Connecting Your Robotic Brain to the Virtual Body" translate="no">​</a></h2>
<p>The true power of digital twins in robotics is unleashed when they can be seamlessly controlled and monitored by the same software stack used for physical robots. For ROS 2, this means establishing robust communication bridges between your ROS 2 nodes and both Gazebo and Unity simulation environments. This chapter details the essential tools and techniques for integrating ROS 2 with these simulators.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-ros-2-and-gazebo-integration">1. ROS 2 and Gazebo Integration<a href="#1-ros-2-and-gazebo-integration" class="hash-link" aria-label="Direct link to 1. ROS 2 and Gazebo Integration" title="Direct link to 1. ROS 2 and Gazebo Integration" translate="no">​</a></h3>
<p>Gazebo&#x27;s integration with ROS 2 is deep and well-established, primarily facilitated by the <code>gazebo_ros_pkgs</code> and <code>ros_gz_bridge</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-gazebo_ros_pkgs">a. <code>gazebo_ros_pkgs</code><a href="#a-gazebo_ros_pkgs" class="hash-link" aria-label="Direct link to a-gazebo_ros_pkgs" title="Direct link to a-gazebo_ros_pkgs" translate="no">​</a></h4>
<p>These packages provide a set of plugins and utilities that allow ROS 2 nodes to interact with Gazebo. Key components include:</p>
<ul>
<li class=""><strong><code>libgazebo_ros_init.so</code></strong>: Initializes the ROS 2 node within Gazebo itself, allowing direct ROS 2 access to Gazebo&#x27;s internal APIs.</li>
<li class=""><strong><code>libgazebo_ros_factory.so</code></strong>: Enables spawning Gazebo models from ROS 2 using services.</li>
<li class=""><strong>Sensor Plugins</strong>: As seen in Chapter 11, plugins like <code>libgazebo_ros_camera.so</code>, <code>libgazebo_ros_imu_sensor.so</code>, <code>libgazebo_ros_ray_sensor.so</code> publish sensor data directly to ROS 2 topics.</li>
<li class=""><strong>Actuator Plugins</strong>: Plugins that allow ROS 2 to control actuators, such as joint controllers (e.g., <code>libgazebo_ros_joint_state_publisher.so</code> or <code>gazebo_ros_control</code> if using <code>ros2_control</code>).</li>
</ul>
<p><strong>Example: Spawning a Robot from ROS 2</strong></p>
<p>In Chapter 10, we used <code>spawn_entity.py</code>. This script is part of <code>gazebo_ros</code>, and it communicates with Gazebo&#x27;s <code>SpawnEntity</code> service. A common workflow involves a launch file that:</p>
<ol>
<li class="">Starts Gazebo with a specific world.</li>
<li class="">Launches <code>robot_state_publisher</code> to publish the robot&#x27;s URDF.</li>
<li class="">Calls <code>spawn_entity.py</code> to insert the robot into the Gazebo world.</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="b-ros_gz_bridge">b. <code>ros_gz_bridge</code><a href="#b-ros_gz_bridge" class="hash-link" aria-label="Direct link to b-ros_gz_bridge" title="Direct link to b-ros_gz_bridge" translate="no">​</a></h4>
<p>The <code>ros_gz_bridge</code> package provides a generic method to bridge messages between ROS 2 and Gazebo&#x27;s native communication system (Gazebo Transport). This is particularly useful for connecting new or custom Gazebo topics/messages to ROS 2.</p>
<p><strong>Bridging Example: ROS 2 Twist to Gazebo cmd_vel</strong></p>
<p>If your Gazebo model uses a plugin that expects Gazebo Transport messages for velocity commands, you can bridge a ROS 2 <code>Twist</code> message to it.</p>
<p>First, identify the Gazebo Transport topic (e.g., <code>/model/my_robot/cmd_vel</code>) and its type (e.g., <code>gz.msgs.Twist</code>).
Then, in a ROS 2 launch file, you can declare a bridge:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Minimal example in a launch file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LaunchDescription</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> launch_ros</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">generate_launch_description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> LaunchDescription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ros_gz_bridge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            executable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ros_gz_bridge&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arguments</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;/cmd_vel@geometry_msgs/msg/Twist[gz.msgs.Twist&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># ROS 2 topic to Gazebo topic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;/model/my_robot/pose@tf2_msgs/msg/TF[gz.msgs.Pose&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Gazebo pose to ROS 2 TF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;screen&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>The syntax <code>/cmd_vel@geometry_msgs/msg/Twist[gz.msgs.Twist</code> indicates:</p>
<ul>
<li class="">ROS 2 topic: <code>/cmd_vel</code></li>
<li class="">ROS 2 message type: <code>geometry_msgs/msg/Twist</code></li>
<li class="">Gazebo message type: <code>gz.msgs.Twist</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-ros-2-and-unity-integration">2. ROS 2 and Unity Integration<a href="#2-ros-2-and-unity-integration" class="hash-link" aria-label="Direct link to 2. ROS 2 and Unity Integration" title="Direct link to 2. ROS 2 and Unity Integration" translate="no">​</a></h3>
<p>Integrating ROS 2 with Unity is achieved through a set of official Unity Robotics packages, primarily <code>ROS-TCP-Endpoint</code> and <code>ROS-Unity-Integration</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-ros-tcp-endpoint">a. ROS-TCP-Endpoint<a href="#a-ros-tcp-endpoint" class="hash-link" aria-label="Direct link to a. ROS-TCP-Endpoint" title="Direct link to a. ROS-TCP-Endpoint" translate="no">​</a></h4>
<p>This package creates a TCP/IP endpoint within your Unity application that can communicate with a ROS 2 system. It acts as the low-level transport layer, allowing messages to flow between Unity and ROS 2.</p>
<p><strong>Setup</strong>:</p>
<ol>
<li class="">In your ROS 2 environment, ensure <code>ros2_bridge</code> is running if you need to bridge ROS 1 to ROS 2, or if you&#x27;re using <code>ROS-TCP-Endpoint</code> with ROS 1. For pure ROS 2, <code>ROS-TCP-Endpoint</code> communicates directly with Unity via TCP.</li>
<li class="">In Unity, the <code>ROSConnection</code> component (from <code>ROS-TCP-Endpoint</code>) manages the TCP connection. You set the ROS 2 (or ROS Bridge) IP address and port.</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="b-ros-unity-integration">b. ROS-Unity-Integration<a href="#b-ros-unity-integration" class="hash-link" aria-label="Direct link to b. ROS-Unity-Integration" title="Direct link to b. ROS-Unity-Integration" translate="no">​</a></h4>
<p>This package provides C# classes that mirror your ROS 2 message types, allowing you to create publishers and subscribers within Unity that speak directly to ROS 2 topics.</p>
<p><strong>Workflow</strong>:</p>
<ol>
<li class=""><strong>Generate C# Messages</strong>: The <code>ROS-Unity-Integration</code> tools can generate C# message definitions from your ROS 2 <code>.msg</code>, <code>.srv</code>, and <code>.action</code> files. This step makes your ROS 2 data types available in Unity&#x27;s C# scripting environment.</li>
<li class=""><strong>Create Publishers/Subscribers in Unity</strong>: Write C# scripts that use the generated message types and <code>ROSConnection</code> to publish data from Unity sensors (e.g., virtual camera, virtual LiDAR) to ROS 2 topics, or subscribe to ROS 2 topics (e.g., <code>/cmd_vel</code>) to control your Unity robot.</li>
</ol>
<p><strong>Example: Unity Publisher for Odometry to ROS 2</strong></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UnityOdomPublisher.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using RosMessageTypes.Nav; // Assumes nav_msgs/Odometry.msg is generated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Unity.Robotics.ROSTCPConnector;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UnityOdomPublisher : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ROSConnection ros;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string rosTopicName = &quot;/odom&quot;; // ROS 2 topic for odometry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private NavOdometryMsg odomMessage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ros = ROSConnection.Get  Instance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ros.RegisterPublisher&lt;NavOdometryMsg&gt;(rosTopicName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        odomMessage = new NavOdometryMsg();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void FixedUpdate() // Or Update, depending on your needs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Populate odomMessage with current robot pose and velocity from Unity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Example: Get pose from Unity&#x27;s Transform component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        odomMessage.pose.pose.position.x = transform.position.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        odomMessage.pose.pose.position.y = transform.position.y;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        odomMessage.pose.pose.position.z = transform.position.z;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ... fill orientation, covariance, twist data ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ros.Publish(rosTopicName, odomMessage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h3>
<p>By successfully integrating ROS 2 with both Gazebo and Unity, you now have a powerful digital twin development pipeline. You can use ROS 2 to command your virtual robots, receive realistic sensor feedback, and develop complex AI algorithms in a safe and reproducible environment. The next module will take you deeper into the AI side, exploring how NVIDIA Isaac can be used as the &quot;brain&quot; for your robots.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/ShumailaWaheed/Physical-AI-Humanoid-Robotics-A-Comprehensive-Textbook/edit/main/docs/module2-digital-twin/ros2-integration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/module2-digital-twin/unity-for-robotics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chapter 12: Unity for Robotics Visualization</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/module3-ai-robot-brain/isaac-sim-overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chapter 14: Isaac Sim Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#connecting-your-robotic-brain-to-the-virtual-body" class="table-of-contents__link toc-highlight">Connecting Your Robotic Brain to the Virtual Body</a><ul><li><a href="#1-ros-2-and-gazebo-integration" class="table-of-contents__link toc-highlight">1. ROS 2 and Gazebo Integration</a></li><li><a href="#2-ros-2-and-unity-integration" class="table-of-contents__link toc-highlight">2. ROS 2 and Unity Integration</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Modules</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/module1-ros2/ros2-fundamentals">Robotic Nervous System (ROS 2)</a></li><li class="footer__item"><a class="footer__link-item" href="/module2-digital-twin/digital-twins-in-robotics">Digital Twin (Gazebo &amp; Unity)</a></li><li class="footer__item"><a class="footer__link-item" href="/module3-ai-robot-brain/isaac-sim-overview">AI-Robot Brain (NVIDIA Isaac)</a></li><li class="footer__item"><a class="footer__link-item" href="/module4-vla-capstone/vla-fundamentals">Vision-Language-Action (VLA + LLMs)</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Shumaila Waheed</div></div></div></footer></div>
</body>
</html>